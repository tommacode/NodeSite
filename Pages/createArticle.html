<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;400;600&display=swap"
      rel="stylesheet"
    />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add/Edit articles</title>
    <link rel="stylesheet" href="css.css" />
  </head>
  <body>
    <div id="frosted">
      <nav>
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/projects">Articles</a></li>
        </ul>
      </nav>
      <!--Big header to draw attention-->
      <header>
        <h1>Create article</h1>
        <h3>Create another article</h3>
      </header>
      <button id="reset1" class="clearBtn" onclick="ResetAll()">
        Reset All
      </button>
      <div id="create">
        <form>
          <input type="text" name="title" id="title" placeholder="Title" />
          <br />
          <input
            type="text"
            id="appetizer"
            placeholder="Appetizer"
            style="width: 15vw"
          />
          <br />
          <textarea
            placeholder="Content"
            id="Content-field"
            style="width: 35vw"
          ></textarea>
          <input
            type="text"
            id="tags"
            placeholder="Tags (Separate by commas)"
            style="width: 25vw"
          />
          <br />
          <input type="password" placeholder="Password" id="password" />
          <br />
          <button onclick="Visibility()" id="Visibility">Public</button>
          <br />
          <input type="button" onclick="SubmitNew()" value="Create" />
        </form>
        <p style="display: none" id="Response"></p>
      </div>
      <div id="footer">
        <h3>Footer</h3>
        <!--Links-->
        <ul class="linkBar">
          <li>
            <a
              target="_blank"
              href="https://github.com/tommacode"
              class="listLink"
              >My Github</a
            >
          </li>
          <li>
            <a
              target="_blank"
              href="https://tomhasawebsite.com"
              class="listLink"
              >Other Website</a
            >
          </li>
          <li><a href="#" class="listLink">Back to the top!</a></li>
        </ul>
      </div>
      <script>
        //Post data to the server
        function Visibility() {
          if (document.getElementById("Visibility").innerHTML == "Private") {
            document.getElementById("Visibility").innerHTML = "Public";
          } else {
            document.getElementById("Visibility").innerHTML = "Private";
          }
        }
        function SubmitNew() {
          var title = document.getElementById("title").value;
          var appetizer = document.getElementById("appetizer").value;
          var content = document.getElementById("Content-field").value;
          var tags = document.getElementById("tags").value;
          var visibility = document.getElementById("Visibility").innerHTML;
          var password = document.getElementById("password").value;
          console.log(visibility);
          var data = {
            title: title,
            appetizer: appetizer,
            content: content,
            tags: tags,
            password: password,
            visibility: visibility,
          };
          var http = new XMLHttpRequest();
          http.open("POST", "/api/projects/new", true);
          http.setRequestHeader("Content-Type", "application/json");
          http.send(JSON.stringify(data));
          http.onreadystatechange = function () {
            if (http.readyState == 4 && http.status == 200) {
              document.getElementById("Response").style.display = "block";
              document.getElementById("Response").innerHTML =
                "<b>Response:</b> " + http.responseText;
            }
          };
        }
      </script>
    </div>
  </body>
</html>
